### 过期策略

对于设置了过期时间的`key`，Redis会将其放置到特定的字典中，通过扫描字典中`key`的过期时间来判断是否删除`key`。有两种策略，一种是定期删除，一种是惰性删除。

- 定期删除：用其他线程开启定时任务，每隔100ms就随机从字典中随机获取20个`key`，根据过期时间来决定是否删除`key`，如果删除的比例超过 1/4，那么就重复获取`key`并删除过期`key`，否则结束等待下一个100ms任务。

- 惰性删除：在第三方服务获取`key`的时候，判断`key`的过期时间，如果过期则删除或者从DB中获取，否则返回数据给第三方服务。



### 持久化

Redis使用快照 + AOF日志来保存内存中的数据